{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
  <h2 class="text-center mb-4">üå≥ Member Binary Tree</h2>

  <!-- Messages -->
  {% if messages %}
    <div>
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} text-center">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- Tree Display -->
  <div class="tree text-center">
    {% if root %}
      <div class="card d-inline-block p-3 shadow-sm mb-3">
        <strong>{{ root.id }} - {{ root.name }}</strong><br>
        <small>Sponsor: {{ root.sponsor.name if root.sponsor else "-" }}</small>
      </div>

      <div class="row justify-content-center">
        <div class="col-md-6">
          <h5>‚¨Ö Left</h5>
          {% if root.left_child %}
            <a href="{% url 'member_tree_root' root.left_child.id %}">
              {{ root.left_child.id }} - {{ root.left_child.name }}
            </a>
          {% else %}
            <span class="text-muted">Empty</span>
          {% endif %}
        </div>
        <div class="col-md-6">
          <h5>‚û° Right</h5>
          {% if root.right_child %}
            <a href="{% url 'member_tree_root' root.right_child.id %}">
              {{ root.right_child.id }} - {{ root.right_child.name }}
            </a>
          {% else %}
            <span class="text-muted">Empty</span>
          {% endif %}
        </div>
      </div>
    {% else %}
      <div class="alert alert-info">No tree root selected.</div>
    {% endif %}
  </div>

  <!-- Back to Members -->
  <div class="text-center mt-4">
    <a href="{% url 'member_list' %}" class="btn btn-secondary">‚¨Ö Back to Members</a>
    <a href="{% url 'admin_dashboard' %}" class="btn btn-dark">üè† Back to Dashboard</a>
  </div>
</div>
{% endblock %}

