{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-3 text-primary">ðŸŒ¿ Rocky Herbals Dashboard</h2>
  <p class="lead">Welcome to Rocky Herbals application home page.</p>

  <!-- Top Navigation Cards -->
  <div class="row mt-4">
    <!-- Member Tree Card -->
    <div class="col-md-3">
      <div class="card shadow-sm">
        <img src="{% static 'images/tree.png' %}" class="card-img-top" alt="Member Tree">
        <div class="card-body text-center">
          <h5 class="card-title">Member Tree</h5>
          <p class="card-text">View and manage your binary tree.</p>
          <a href="{% url 'member_tree_root' %}" class="btn btn-primary">View Tree</a>
        </div>
      </div>
    </div>

    <!-- Members List Card -->
    <div class="col-md-3">
      <div class="card shadow-sm">
        <img src="{% static 'images/members.png' %}" class="card-img-top" alt="Members">
        <div class="card-body text-center">
          <h5 class="card-title">Members</h5>
          <p class="card-text">Browse all registered members.</p>
          <a href="{% url 'member_list' %}" class="btn btn-info">Members List</a>
        </div>
      </div>
    </div>

    <!-- Products Card -->
    <div class="col-md-3">
      <div class="card shadow-sm">
        <img src="{% static 'images/products.png' %}" class="card-img-top" alt="Products">
        <div class="card-body text-center">
          <h5 class="card-title">Products</h5>
          <p class="card-text">Explore Rocky Herbals products.</p>
          <a href="{% url 'products' %}" class="btn btn-success">View Products</a>
        </div>
      </div>
    </div>

    <!-- Income Page Card -->
    <div class="col-md-3">
      <div class="card shadow-sm">
        <img src="{% static 'images/income.png' %}" class="card-img-top" alt="Income">
        <div class="card-body text-center">
          <h5 class="card-title">Income</h5>
          <p class="card-text">View members income details.</p>
          <a href="{% url 'income_page' %}" class="btn btn-warning">Income Report</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Income Snapshot -->
  <div class="row mt-5">
    <h4 class="text-success fw-bold">Income Snapshot</h4>
    <div class="row g-3">
      <div class="col-md-2">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <h6 class="text-muted">Binary</h6>
            <h5 class="fw-bold text-success">â‚¹{{ member.calculate_full_income.binary_income }}</h5>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <h6 class="text-muted">Flash</h6>
            <h5 class="fw-bold text-info">â‚¹{{ member.calculate_full_income.flash_bonus }}</h5>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <h6 class="text-muted">Sponsor</h6>
            <h5 class="fw-bold text-warning">â‚¹{{ member.calculate_full_income.sponsor_income }}</h5>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <h6 class="text-muted">Salary</h6>
            <h5 class="fw-bold text-danger">â‚¹{{ member.calculate_full_income.salary }}</h5>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <h6 class="text-muted">Commission</h6>
            <h5 class="fw-bold text-primary">â‚¹{{ member.calculate_full_income.stock_commission }}</h5>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BV Progress Bars -->
  <div class="mt-4">
    <h5 class="fw-bold">Business Volume (BV)</h5>
    <div class="mb-2">
      <span class="text-muted">Left BV</span>
      <div class="progress">
        <div class="progress-bar bg-success" role="progressbar"
             style="width: {{ member.get_bv_counts.0|floatformat:0 }}%">
          {{ member.get_bv_counts.0 }}
        </div>
      </div>
    </div>
    <div class="mb-2">
      <span class="text-muted">Right BV</span>
      <div class="progress">
        <div class="progress-bar bg-info" role="progressbar"
             style="width: {{ member.get_bv_counts.1|floatformat:0 }}%">
          {{ member.get_bv_counts.1 }}
        </div>
      </div>
    </div>
  </div>

  <!-- Tree View (no collapse, direct cards) -->
  <div class="mt-4">
    <h5 class="fw-bold">Genealogy Tree</h5>
    <div class="row">
      <div class="col-md-6">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="text-muted">Left Child</h6>
            {% if member.left_child %}
              <p class="fw-bold text-success">{{ member.left_child.name }} ({{ member.left_child.auto_id }})</p>
            {% else %}
              <p class="text-muted">None</p>
            {% endif %}
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="text-muted">Right Child</h6>
            {% if member.right_child %}
              <p class="fw-bold text-success">{{ member.right_child.name }} ({{ member.right_child.auto_id }})</p>
            {% else %}
              <p class="text-muted">None</p>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}

