<!-- Add Member Modal -->
<div id="addModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('addModal')">&times;</span>
    <h3>Add Member</h3>
    <form id="addForm">
      <div class="form-group"><label>Name</label><input type="text" id="name"></div>
      <div class="form-group"><label>Phone</label><input type="text" id="phone"></div>
      <div class="form-group"><label>Email</label><input type="text" id="email"></div>
      <div class="form-group"><label>Aadhaar</label><input type="text" id="aadhar"></div>
      <div class="form-group"><label>Auto ID</label><input type="text" id="auto_id"></div>
      <div class="form-group"><label>Place</label><input type="text" id="place"></div>
      <div class="form-group"><label>District</label><input type="text" id="district"></div>
      <div class="form-group"><label>Pincode</label><input type="text" id="pincode"></div>
      <button type="button" onclick="submitMember()">Save</button>
    </form>
  </div>
</div>

<!-- Member Detail Modal -->
<div id="detailModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('detailModal')">&times;</span>
    <h3>Member Details</h3>
    <div id="memberDetails"></div>
  </div>
</div>

<script>
function openAddForm(parentId, side) {
    const form = document.getElementById('addForm');
    form.dataset.parentId = parentId;
    form.dataset.side = side;
    document.getElementById('addModal').style.display = 'block';
}

function submitMember() {
    const form = document.getElementById('addForm');
    const data = {
        parentId: form.dataset.parentId,
        side: form.dataset.side,
        name: document.getElementById('name').value,
        phone: document.getElementById('phone').value,
        email: document.getElementById('email').value,
        aadhar: document.getElementById('aadhar').value,
        auto_id: document.getElementById('auto_id').value,
        place: document.getElementById('place').value,
        district: document.getElementById('district').value,
        pincode: document.getElementById('pincode').value
    };
    closeModal('addModal');
    alert("New Member Added:\n" + JSON.stringify(data, null, 2));
    // TODO: send data to Django backend via fetch('/member/add/', {method:'POST', body:...})
}

function showMemberDetail(member) {
    const details = `
      <p><b>Name:</b> ${member.name}</p>
      <p><b>Auto ID:</b> ${member.auto_id}</p>
      <p><b>Phone:</b> ${member.phone}</p>
      <p><b>BV Details:</b> (calculate here)</p>
    `;
    document.getElementById('memberDetails').innerHTML = details;
    document.getElementById('detailModal').style.display = 'block';
}

function closeModal(id) {
    document.getElementById(id).style.display = 'none';
}
</script>

