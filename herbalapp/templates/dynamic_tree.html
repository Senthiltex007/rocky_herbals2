{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Genealogy Tree</title>

<!-- Bootstrap (only layout, not tree) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

<!-- TREE CSS -->
<link rel="stylesheet" href="{% static 'herbalapp/tree.css' %}">
</head>

<body>

<div class="container-fluid mt-3">

  <!-- ================= HEADER ================= -->
  <h3 class="text-center mb-4">
    üå≥ Genealogy Tree ‚Äì {{ root_member.auto_id }}
  </h3>

  <!-- ================= INCOME SUMMARY ================= -->
  <div class="row text-center mb-3">
    <div class="col-md-3 col-6"><strong>Left Count</strong><br>{{ left_count }}</div>
    <div class="col-md-3 col-6"><strong>Right Count</strong><br>{{ right_count }}</div>
    <div class="col-md-3 col-6"><strong>Pairs</strong><br>{{ pairs }}</div>
    <div class="col-md-3 col-6"><strong>Binary Income</strong><br>‚Çπ{{ binary_income }}</div>
  </div>

  <div class="row text-center mb-4">
    <div class="col-md-4 col-6"><strong>Sponsor Income</strong><br>‚Çπ{{ sponsor_income }}</div>
    <div class="col-md-4 col-6"><strong>Flashout</strong><br>‚Çπ{{ flashout }}</div>
    <div class="col-md-4 col-12"><strong>Binary Eligible</strong><br>{{ binary_eligible }}</div>
  </div>

  <!-- ================= TREE WRAPPER ================= -->
  <div class="tree-container">
    <div class="tree" id="tree">

      <!-- ROOT NODE -->
      {% include "tree_node.html" with member=root_member %}

    </div>
  </div>

</div>

<!-- ================= ZOOM CONTROLS ================= -->
<div class="zoom-controls">
  <button class="btn btn-primary" onclick="zoomIn()">Ôºã</button>
  <button class="btn btn-primary" onclick="zoomOut()">Ôºç</button>
</div>

<!-- ================= ZOOM SCRIPT ================= -->
<script>
let scale = 1;
const tree = document.getElementById("tree");

function zoomIn() {
  scale += 0.1;
  tree.style.transform = `scale(${scale})`;
}

function zoomOut() {
  scale = Math.max(0.5, scale - 0.1);
  tree.style.transform = `scale(${scale})`;
}
</script>

</body>
</html>

