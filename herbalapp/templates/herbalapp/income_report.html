<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Income Report - {{ run_date }}</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f8f9fa;
        }
        .report-card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            padding: 20px;
        }
        table th {
            background: #0d6efd;
            color: #fff;
            text-align: center;
            vertical-align: middle;
        }
        table td {
            text-align: center;
            vertical-align: middle;
        }
        tfoot td {
            background: #e9f2ff;
            font-weight: bold;
        }
        .total-highlight {
            color: #198754;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container my-4">

    <div class="report-card">

        <h3 class="text-center mb-3">
            ðŸ’° Income Report
        </h3>

        <p class="text-center text-muted mb-4">
            Run Date : <strong>{{ run_date }}</strong>
        </p>

        {% if error_msg %}
            <div class="alert alert-danger text-center">
                {{ error_msg }}
            </div>
        {% endif %}

        <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle">
                <thead>
                    <tr>
                        <th>Member ID</th>
                        <th>Name</th>
                        <th>Eligibility</th>
                        <th>Binary</th>
                        <th>Sponsor</th>
                        <th>Wallet</th>
                        <th>Salary</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for rec in members %}
                    <tr>
                        <td>{{ rec.member.auto_id }}</td>
                        <td>{{ rec.member.name }}</td>
                        <td>{{ rec.eligibility_income }}</td>
                        <td>{{ rec.binary_income }}</td>
                        <td>{{ rec.sponsor_income }}</td>
                        <td>{{ rec.wallet_income }}</td>
                        <td>{{ rec.salary_income }}</td>
                        <td class="total-highlight">
                            {{ rec.total_income }}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="8" class="text-center text-danger">
                            No income records found
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2">TOTAL</td>
                        <td>{{ totals.total_eligibility|default:"0" }}</td>
                        <td>{{ totals.total_binary|default:"0" }}</td>
                        <td>{{ totals.total_sponsor|default:"0" }}</td>
                        <td>{{ totals.total_wallet|default:"0" }}</td>
                        <td>{{ totals.total_salary|default:"0" }}</td>
                        <td class="total-highlight">
                            {{ totals.grand_total|default:"0" }}
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <div class="text-center mt-3">
            <a href="/" class="btn btn-secondary btn-sm">â¬… Back</a>
        </div>

    </div>

</div>

</body>
</html>

