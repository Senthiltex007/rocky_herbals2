<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>{{ member.name }} - Genealogy Tree</title>

<style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; }
    h2 { text-align:center; padding:15px; background:#0057b7; color:white; }

    .tree { width:100%; overflow-x:auto; text-align:center; margin-top:20px; }
    .tree ul { padding-top:20px; display:table; margin:auto; }
    .tree li { display:table-cell; text-align:center; padding:20px 5px; vertical-align:top; position:relative; }

    .tree li::before, .tree li::after {
        content:''; position:absolute; top:0; right:50%;
        border-top:1px solid #bbb; width:50%; height:20px;
    }
    .tree li::after { right:auto; left:50%; border-left:1px solid #bbb; }
    .tree li:only-child::before, .tree li:only-child::after { display:none; }

    .member-box {
        background:white; padding:10px 15px; border-radius:8px; border:1px solid #999;
        cursor:pointer; min-width:120px; transition:.3s;
    }
    .member-box:hover { background:#dff1ff; transform:scale(1.06); }

    .add-box {
        background:#e7ffe7; border:1px dashed #00b300; font-size:13px; color:#008000;
        padding:7px 10px; border-radius:6px; min-width:100px; cursor:pointer;
    }
    .add-box:hover { background:#caffca; }

    /* Popup */
    #popup {
        display:none; position:fixed; top:0; left:0; width:100%; height:100%;
        background:rgba(0,0,0,0.4); z-index:1000; justify-content:center; align-items:center;
    }
    .popup-box {
        background:white; padding:20px; width:280px; text-align:center;
        border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.3);
    }
    .popup-box button { margin-top:10px; padding:7px 14px; border:none; background:#0057b7; color:white; cursor:pointer; border-radius:5px; }
    .popup-box button:hover { background:#003f88; }
</style>
</head>

<body>

<!-- ✅ Use member_id instead of auto_id -->
<h2>Genealogy Tree – {{ member.name }} (ID: {{ member.member_id }})</h2>

<div class="tree">
    <ul class="tree-root">
        {% include "tree_node.html" with member=member %}
    </ul>
</div>

<!-- POPUP BOX -->
<div id="popup">
    <div class="popup-box">
        <h3 id="popName"></h3>
        <p>ID: <span id="popMemberId"></span></p>

        <a id="viewBtn" href="#" style="color:blue;font-weight:bold;">View Full Profile</a><br><br>
        <button onclick="closePopup()">Close</button>
    </div>
</div>

<script>
function openMemberPopup(id,name,memberId){
    document.getElementById("popName").innerText=name;
    document.getElementById("popMemberId").innerText=memberId;
    document.getElementById("viewBtn").href="/member/detail/"+id+"/";
    document.getElementById("popup").style.display="flex";
}
function closePopup(){
    document.getElementById("popup").style.display="none";
}
</script>

</body>
</html>

