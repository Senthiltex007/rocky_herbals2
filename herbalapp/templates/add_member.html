<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add Member</title>
    <style>
        body { font-family: Arial, sans-serif; background:#f7f7f7; margin:0; padding:20px; }
        .container { max-width:600px; margin:auto; background:#fff; padding:20px;
                     border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,.1); }

        h2 { text-align:center; margin-bottom:20px; }

        label { font-weight:bold; margin-top:10px; display:block; }
        input, select { width:100%; padding:8px; margin-top:5px; border:1px solid #ccc; border-radius:5px; }

        input[readonly] { background:#e9ecef; font-weight:bold; }

        button { margin-top:20px; padding:10px; width:100%; background:#28a745; color:white;
                 border:none; font-size:16px; border-radius:5px; cursor:pointer; }
        button:hover { background:#218838; }

        .back { text-align:center; margin-top:15px; }
        .back a { text-decoration:none; color:#007bff; }

        .error { background:#ffdddd; padding:10px; color:#a00;
                 border-left:5px solid red; margin-bottom:15px; }

        .avatar-preview { margin-top:15px; text-align:center; }
        .avatar-preview img { width:60px; height:60px; border-radius:50%; border:2px solid #ccc; }
    </style>
</head>

<body>
<div class="container">

    <h2>Add New Member</h2>

    {% if error %}
        <div class="error">{{ error }}</div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <label>Member ID (Auto Generated)</label>
        <input type="text" name="auto_id" value="{{ auto_id }}" readonly>

        <label>Name</label>
        <input type="text" name="name" required>

        <label>Phone</label>
        <input type="text" name="phone" required>

        <label>Email</label>
        <input type="email" name="email">

        <label>Aadhar No</label>
        <input type="text" name="aadhar">

        <label>Place</label>
        <input type="text" name="place">

        <label>District</label>
        <input type="text" name="district">

        <label>Pincode</label>
        <input type="text" name="pincode">

        <!-- ✅ Placement auto-filled -->
        <label>Placement ID (Under Which Member?)</label>
        <input type="text" name="placement_id" value="{{ placement_auto_id }}" readonly required>

        <!-- ✅ Position (Left / Right) -->
        <label>Position</label>
        <input type="text" name="side" value="{{ side }}" readonly>

        <!-- ✅ Sponsor -->
        <label>Sponsor ID (Income Goes To)</label>
        <input type="text" name="sponsor_id" placeholder="rocky001" required>

        <!-- ✅ Joined Date -->
        <label>Joined Date</label>
        <input type="text" name="joined_date" value="{{ today_date }}" readonly>

        <!-- ✅ Avatar Upload -->
        <label>Avatar (Optional)</label>
        <input type="file" name="avatar" accept="image/*">

        <button type="submit">Save Member</button>
    </form>

    {% if form.instance.avatar %}
        <div class="avatar-preview">
            <p>Current Avatar:</p>
            <img src="{{ form.instance.avatar.url }}" alt="Avatar">
        </div>
    {% endif %}

    <div class="back"><a href="/members/">Back</a></div>

</div>
</body>
</html>

